{
  "name": "Amtrak One-Way Train Search",
  "description": "Navigate to Amtrak and search one-way trains with prices via the /dotcom/journey-solution-option endpoint. Saves the result to session storage and returns it.",
  "operations": [
    {
      "type": "navigate",
      "url": "https://www.amtrak.com/home.html"
    },
    {
      "type": "sleep",
      "timeout_seconds": 2.5
    },
    {
      "type": "fetch",
      "endpoint": {
        "url": "https://www.amtrak.com/dotcom/journey-solution-option",
        "description": "Search one-way journey options and fares",
        "method": "POST",
        "headers": "{\"x-amtrak-trace-id\":\"{{sessionStorage:ibsession.sessionid}}\",\"sec-ch-ua-platform\":\"\\\"macOS\\\"\",\"Referer\":\"https://www.amtrak.com/home.html\",\"sec-ch-ua\":\"\\\"Google Chrome\\\";v=\\\"141\\\", \\\"Not?A_Brand\\\";v=\\\"8\\\", \\\"Chromium\\\";v=\\\"141\\\"\",\"CSRF-Token\":\"undefined\",\"sec-ch-ua-mobile\":\"?0\",\"User-Agent\":\"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36\",\"Accept\":\"application/json, text/plain, */*\",\"Content-Type\":\"application/json\"}",
        "body": "{\"journeyRequest\":{\"fare\":{\"pricingUnit\":\"DOLLARS\"},\"alternateDayOption\":true,\"type\":\"OW\",\"journeyLegRequests\":[{\"origin\":{\"code\":\"{{origin_code}}\",\"schedule\":{\"departureDateTime\":\"{{departure_datetime}}\"}},\"destination\":{\"code\":\"{{destination_code}}\"},\"passengers\":[{\"id\":\"P1\",\"type\":\"{{passenger_type}}\",\"initialType\":\"{{passenger_initial_type}}\"}]}],\"customer\":{\"tierStatus\":\"{{tier_status}}\"},\"isPassRider\":false,\"isCorporateTraveller\":false,\"tripTags\":true,\"singleAdultFare\":true,\"cascadesWSDOTFilter\":false},\"initialJourneyLegOnly\":false,\"reservableAccomodationOptions\":\"ALL\"}",
        "credentials": "same-origin"
      },
      "session_storage_key": "amtrak.journey_solution"
    },
    {
      "type": "return",
      "session_storage_key": "amtrak.journey_solution"
    }
  ],
  "parameters": [
    {
      "name": "origin_code",
      "required": true,
      "description": "Origin station code (e.g., NYP for New York Penn Station).",
      "default": "NYP",
      "examples": [
        "NYP",
        "WAS",
        "PHL"
      ]
    },
    {
      "name": "destination_code",
      "required": true,
      "description": "Destination station code (e.g., BOS for Boston South Station).",
      "default": "BOS",
      "examples": [
        "BOS",
        "BAL",
        "NLC"
      ]
    },
    {
      "name": "departure_datetime",
      "required": true,
      "description": "Departure datetime in ISO 8601 format (local station time).",
      "default": "2025-11-20T00:00:00",
      "examples": [
        "2025-11-20T00:00:00",
        "2025-12-01T00:00:00"
      ]
    },
    {
      "name": "passenger_type",
      "required": true,
      "description": "Passenger fare type code (F=full-fare adult).",
      "default": "F",
      "examples": [
        "F"
      ]
    },
    {
      "name": "passenger_initial_type",
      "required": true,
      "description": "Passenger category (adult, child, etc.).",
      "default": "adult",
      "examples": [
        "adult",
        "child"
      ]
    },
    {
      "name": "tier_status",
      "required": true,
      "description": "Customer tier status for pricing/eligibility.",
      "default": "MEMBER",
      "examples": [
        "MEMBER",
        "NON_MEMBER"
      ]
    }
  ]
}